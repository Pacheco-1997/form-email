<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--<script src="manda_img.js"></script>-->
    <title>Form Email</title>
</head>
<body>
    <label for="upload-form">Form Email</label><br>
    <form id="upload-form" name="upload-form" action="" method="POST" enctype="multipart/form-data">
    
    <label for="nome">Nome:</label><br>
    <input name="nome" id="nome" type="text" ><br>
     
     <label for="email">Email:</label><br>
     <input name="email" id="email" type="text" ><br>
     
     <label for="plataforma">Plataforma</label><br>
     <input type="text" name="plataforma" id="plataforma"><br>

     <label for="problem">Descrição do problema:</label><br>
     <textarea name="problem" id="problem" rows="10" cols="50" >  </textarea>

     <input type="file" name="file-img" id="file-img" placeholder="Escolha um arquivo" multiple>
     <button name="submit" id="submit" type="submit">Enviar arquivo</button>
    </form>
    
<script>

  
const uploadImage = (e) => {
    e.preventDefault();

    const nome = document.getElementById('nome').value;
    const email = document.getElementById('email').value;
    const plataforma = document.getElementById('plataforma').value;
    const problema = document.getElementById('problem').value;

    const file = document.getElementById('file-img');

    if (file.files.length > 3) {
    alert("Only 3 files accepted.");
    e.preventDefault();
}
else {
    const data = new FormData();
    data.append('nome', nome);
    data.append('email', email);
    data.append('plataforma', plataforma);
    data.append('problema', problema);
    data.append('image1', file.files[0]);
    data.append('image2', file.files[1]);
    data.append('image3', file.files[2]);

    
    
       
   
       
    fetch('https://localhost:44371/api/ImageUpload', {
        method: 'POST',
        body: data
          
         
    })
       .catch(console.error)
    }

}


const form = document.getElementById('upload-form');
   
form.addEventListener('submit', uploadImage)
</script>
</body>
</html>